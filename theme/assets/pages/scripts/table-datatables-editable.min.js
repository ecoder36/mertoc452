


var TableDatatablesEditable=function(){var e=function(){function e(e,t){for(var n=e.fnGetData(t),a=$(">td",t),l=0,r=a.length;r>l;l++)e.fnUpdate(n[l],t,l,!1);e.fnDraw()}
function t(e,t){var n=e.fnGetData(t),a=$(">td",t);



a[0].innerHTML='<input disabled type="text" class="form-control input-small" value="'+n[0]+'">',
a[1].innerHTML='<input autocomplete="off" type="text" name="name" class="copy1 form-control input-small" value="'+n[1]+'">',
a[2].innerHTML='<input autocomplete="off" type="text" name="ext" class="copy2 form-control input-small" value="'+n[2]+'">',
a[3].innerHTML='<input autocomplete="off" type="text" name="dept" class="copy3 form-control input-small" value="'+n[3]+'">',
a[4].innerHTML='<input autocomplete="off" type="text" name="position" class="copy4 form-control input-small" value="'+n[4]+'">',
a[5].innerHTML='<input autocomplete="off" type="text" name="bleeb" class="copy5 form-control input-small" value="'+n[5]+'">',




a[6].innerHTML='<form clas="edit" action="saveinfo.php?id='+n[0]+'&859" method="post" ><input type="hidden" class="copy1" name="name" value="'+n[1]+'"><input type="hidden" class="copy2" name="ext" value="'+n[2]+'"><input type="hidden" class="copy3" name="dept" value="'+n[3]+'"><input type="hidden" class="copy4" name="position" value="'+n[4]+'"><input type="hidden" class="copy5" name="bleeb" value="'+n[5]+'"><button type="submit" onclick="$(this).parent(\'form\').submit();" class="btn btn-primary">Save</button></form> ',
$(".copy1").keyup(function(){ $(".copy1").val($(this).val()); });
$(".copy2").keyup(function(){ $(".copy2").val($(this).val()); });
$(".copy3").keyup(function(){ $(".copy3").val($(this).val()); });
$(".copy4").keyup(function(){ $(".copy4").val($(this).val()); });
$(".copy5").keyup(function(){ $(".copy5").val($(this).val()); });

//a[4].innerHTML='<a class="edit" href="">Save</a>',



a[7].innerHTML='<a class="cancel" href="">Cancel</a>'





}


function n(e,t){var n=$("input",t);
e.fnUpdate(n[0].value,t,0,!1),
e.fnUpdate(n[1].value,t,1,!1),
e.fnUpdate(n[2].value,t,2,!1),
e.fnUpdate(n[3].value,t,3,!1),
e.fnUpdate(n[4].value,t,4,!1),
e.fnUpdate(n[5].value,t,5,!1),
e.fnUpdate('<a class="edit" href="">Edit</a>',t,6,!1),
e.fnUpdate('<a class="delete" href="">Delete</a>',t,7,!1),
e.fnDraw()}





var a=$("#sample_editable_1"),
l=a.dataTable({


	lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],
	pageLength:10,language:{lengthMenu:" _MENU_ records"},
	columnDefs:[{orderable:!0,
		targets:[0] },
		{searchable:!0,targets:[0]}],
		order:[[0,"asc"]]

	}),



r=($("#sample_editable_1_wrapper"),null),
o=!1;$("#sample_editable_1_new").click(function(e){if(e.preventDefault(),o&&r)
	{if(!confirm("Previose row not saved. Do you want to save it ?"))
	return l.fnDeleteRow(r),
	r=null,void(o=!1);n(l,r),$(r).find("td:first").html("Untitled"),r=null,o=!1}
	var a=l.fnAddData(["","","","","","","",""]),i=l.fnGetNodes(a[0]);t(l,i),r=i,o=!0}),a.on("click",".delete",function(e){if(e.preventDefault(),0!=confirm("Are you sure to delete this row ?")){var t=$(this).parents("tr")[0];l.fnDeleteRow(t),alert("Deleted! Do not forget to do some ajax to sync with backend :)")}}),a.on("click",".cancel",function(t){t.preventDefault(),o?(l.fnDeleteRow(r),r=null,o=!1):(e(l,r),r=null)}),a.on("click",".edit",function(a){a.preventDefault();var o=$(this).parents("tr")[0];null!==r&&r!=o?(e(l,r),t(l,o),r=o):r==o&&"Save"==this.innerHTML?(n(l,r),r=null,alert("Updated! Do not forget to do some ajax to sync with backend :)")):(t(l,o),r=o)})};return{init:function(){e()}}}();jQuery(document).ready(function(){TableDatatablesEditable.init()});
